import{_ as t,X as e,Y as d,Z as n,$ as s,a0 as o,a1 as c,D as p}from"./framework-dfc585d8.js";const l={},r=n("p",null,"作者：村雨遥",-1),i={href:"https://cunyu1943.github.io/JavaPark",target:"_blank",rel:"noopener noreferrer"},k=c(`<blockquote><p>吾生也有涯，而知也无涯。</p></blockquote><h2 id="概述" tabindex="-1"><a class="header-anchor" href="#概述" aria-hidden="true">#</a> 概述</h2><p>所谓约束，就是作用于表中字段上的规则，用来限制存储在表中的数据。使用的目的是为了保证数据库中数据的正确性、有效性以及完整性。</p><p>约束有很多种，常见的约束分类如下表。</p><table><thead><tr><th>关键字</th><th>约束</th><th>描述</th></tr></thead><tbody><tr><td><code>NOT NULL</code></td><td>非空约束</td><td>限制该字段的数据不能为 <code>null</code></td></tr><tr><td><code>UNIQUE</code></td><td>唯一约束</td><td>保证该字段的所有数据都是唯一不重复的</td></tr><tr><td><code>PRIMARY KEY</code></td><td>主键约束</td><td>主键是一行数据的唯一标识，要求非空且唯一</td></tr><tr><td><code>DEFAULT</code></td><td>默认约束</td><td>保存数据时，若未指定该字段的值，则采用默认值</td></tr><tr><td><code>CHECK</code></td><td>检查约束（8.0.16 版本之后）</td><td>保证字段值满足某一个条件</td></tr><tr><td><code>FOREIGN KEY</code></td><td>外键约束</td><td>用于让两张表之间的数据建立连接，从而保证数据的一致性和完整性</td></tr></tbody></table><h2 id="外键约束" tabindex="-1"><a class="header-anchor" href="#外键约束" aria-hidden="true">#</a> 外键约束</h2><p>所谓外键约束，就是让两张表之间的数据建立连接，从而保证数据的一致性和完整性。</p><h3 id="创建-删除约束" tabindex="-1"><a class="header-anchor" href="#创建-删除约束" aria-hidden="true">#</a> 创建/删除约束</h3><p>添加外键的方式主要有两种，一种是在创建表时添加，而另一种则是在创建表之后添加。</p><ol><li><strong>创建时</strong></li></ol><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> 表名<span class="token punctuation">(</span>
	字段名 数据类型<span class="token punctuation">,</span>
    ……
    <span class="token punctuation">[</span><span class="token keyword">CONSTRAINT</span><span class="token punctuation">]</span> <span class="token punctuation">[</span>外键名<span class="token punctuation">]</span> <span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span><span class="token punctuation">(</span>外键字段名<span class="token punctuation">)</span> <span class="token keyword">REFERENCES</span> 主表<span class="token punctuation">(</span>主表列名<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li><strong>创建后</strong></li></ol><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> 表名 <span class="token keyword">ADD</span> <span class="token keyword">CONSTRAINT</span> 外键名称 <span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span><span class="token punctuation">(</span>外键字段名<span class="token punctuation">)</span> <span class="token keyword">REFERENCES</span> 主表<span class="token punctuation">(</span>主表列名<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>既然添加了外键，那当然就有对应删除外键的方式。</p><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> 表名 <span class="token keyword">DROP</span> <span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span> 外键名称<span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h3 id="删除-更新行为" tabindex="-1"><a class="header-anchor" href="#删除-更新行为" aria-hidden="true">#</a> 删除/更新行为</h3><table><thead><tr><th>行为</th><th>说明</th></tr></thead><tbody><tr><td><code>NO ACTION</code></td><td>主表中删除/更新对应记录时，先检查该记录是否有对应外键，若有则不允许删除/更新（与 <code>RESTRICT</code> 一致）</td></tr><tr><td><code>RESTRICT</code></td><td>主表中删除/更新对应记录时，先检查该记录是否有对应外键，若有则不允许删除/更新（与 <code>NO ACTION</code> 一致）</td></tr><tr><td><code>CASCADE</code></td><td>主表中删除/更新对应记录时，先检查该记录是否有对应外键，若有则删除/更新外键在从表中的记录</td></tr><tr><td><code>SET NULL</code></td><td>当在主表中删除对应记录时，先检查该记录是否有对应外键，若有则设置从表中该外键值为 <code>NULL</code>（要求外键可以取 <code>NULL</code>）</td></tr><tr><td><code>SET DEFAULT</code></td><td>主表有变更时，从表将外键列设置为一个默认值（<code>Innodb</code> 不支持）</td></tr></tbody></table><div class="language-sql line-numbers-mode" data-ext="sql"><pre class="language-sql"><code><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> 表名 <span class="token keyword">ADD</span> <span class="token keyword">CONSTRAINT</span> 外键名称 <span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span>外键字段<span class="token punctuation">)</span> <span class="token keyword">REFERENCES</span> 主表名<span class="token punctuation">(</span>主表字段名<span class="token punctuation">)</span> <span class="token keyword">ON</span> <span class="token keyword">UPDATE</span> <span class="token keyword">CASCADE</span> <span class="token keyword">ON</span> <span class="token keyword">DELETE</span> <span class="token keyword">CASCADE</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,18);function u(h,E){const a=p("ExternalLinkIcon");return e(),d("div",null,[r,n("p",null,[s("博客："),n("a",i,[s("JavaPark"),o(a)])]),k])}const y=t(l,[["render",u],["__file","20220305-constraint.html.vue"]]);export{y as default};
