import{_ as c,X as l,Y as r,Z as a,$ as n,a0 as e,a2 as t,a1 as s,D as p}from"./framework-dfc585d8.js";const d="/JavaPark/assets/login-9b8b8375.png",u="/JavaPark/assets/pwd-c3ddd14a.png",g="data:image/png;base64,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",h={},k=a("p",null,"作者：村雨遥",-1),m={href:"https://cunyu1943.github.io/JavaPark",target:"_blank",rel:"noopener noreferrer"},A=s('<blockquote><p>吾生也有涯，而知也无涯。</p></blockquote><h2 id="前言" tabindex="-1"><a class="header-anchor" href="#前言" aria-hidden="true">#</a> 前言</h2><p>Spring Security 是 Spring 家族中一个强大可定制的身份验证和访问控制框架，和 Shiro 一样，它们都具有认证、授权、加密等用于权限管理的功能。但相比于 Shiro，Spring Security 的功能无疑更加强大。而且作为 Spring 家族中的一份子，配合家族中的其它兄弟 - Spring Boot、Spring Cloud 使用起来更加丝滑。</p><p>今天就来看看，如何在 Spring Boot 集成 Spring Security，实现最简单的认证授权功能。</p><h2 id="集成过程" tabindex="-1"><a class="header-anchor" href="#集成过程" aria-hidden="true">#</a> 集成过程</h2><p>要在 Spring Boot 集成 Security，其实很简单，可以总结为如下几个步骤：</p><ol><li>首先是创建一个 Spring Boot 项目。</li><li>添加 Spring Security 相关依赖。</li></ol><h3 id="创建-spring-boot-项目" tabindex="-1"><a class="header-anchor" href="#创建-spring-boot-项目" aria-hidden="true">#</a> 创建 Spring Boot 项目</h3><p>这个过程只要你学习过 Spring Boot，那么你肯定是已经很熟悉了，所以在这里我也就不再赘述了。当然，如果你对这个过程还是不太熟悉，那么可以参考我之前的一篇文章：</p>',9),S=s(`<h3 id="添加相关依赖" tabindex="-1"><a class="header-anchor" href="#添加相关依赖" aria-hidden="true">#</a> 添加相关依赖</h3><p>项目创建好之后，一般默认是已经添加了 <code>Web</code> 依赖，这个时候，我们只需要在项目的 <code>pom.xml</code> 文件中添加 Spring Security 的相关依赖即可。</p><div class="language-xml line-numbers-mode" data-ext="xml"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">&gt;</span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">&gt;</span></span>spring-boot-starter-security<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="启动项目" tabindex="-1"><a class="header-anchor" href="#启动项目" aria-hidden="true">#</a> 启动项目</h3><p>完成上面步骤的操作后，接下来我们直接启动项目，然后在浏览器中访问以下地址：</p><blockquote><p><code>http://localhost:8080</code></p></blockquote><p>不出意外应该会跳出以下的界面，让我们登录。此时你可能会很纳闷，为什么我们只加了个 Spring Security 的依赖，怎么就需要登陆了呢？而且，登录的话，用户名和密码又是多少呢？</p><p>再仔细观察浏览器的地址栏，此时我们访问的地址也变了，变成了：</p><blockquote><p><code>http://localhost:8080/login</code></p></blockquote><p>这又是怎么一回事呢？</p><p>原来这就是 Spring Security 为我们的项目所提供的保护机制。在添加 Spring Security 之后，此时再去访问项目，它就会自动重定向到 Security 所提供的登录页面，也就是下面的界面。</p><p><img src="`+d+`" alt=""></p><p>同样的 Spring Security 也为我们所提供了一个默认的用户名，也就是 <code>user</code>，至于密码，这就谁都说不准了。因为它会随着我们项目的每次启动而自动生成，所以每次的登录密码都是不一样的。至于要如何获取，那就得去我们的 IDEA 查看控制台查看日志了。</p><p>查看日志我们可以发现如下的一行，其实这就是 Spring Security 所提供的登录密码了。这是一个 <code>UUID</code> 字符串，是 Spring Security 为默认的 <code>user</code> 用户所生成的临时密码。</p><div class="language-text line-numbers-mode" data-ext="text"><pre class="language-text"><code>Using generated security password: 67511bb5-a3e4-4113-9e47-4d733956c860
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p><img src="`+u+'" alt=""></p><h3 id="修改默认登录用户密码" tabindex="-1"><a class="header-anchor" href="#修改默认登录用户密码" aria-hidden="true">#</a> 修改默认登录用户密码</h3><p>虽然 Security 提供了默认的 <code>user</code> 用户，但是大家都知道这是默认的，而且需要每次去日志中找登录密码，那有没有方法可以自定义我们的用户和密码呢？答案是，有的。</p><p>Security 为我们提供了配置，我们可以在项目的配置文件 <code>application.yml</code> 中去定义自己的用户名和密码，然后它就会覆盖掉 Security 为我们提供的默认用户和密码。</p><p>在项目的配置文件中配置用户和密码，当然，项目生成的默认配置文件是位于 <code>resources</code> 目录下的 <code>application.properties</code>，所以需要将其后缀改成 <code>.yml</code>。关于 Spring Boot 中的这两种配置文件的区别，可以参考我之前的一篇文章：</p>',20),b=s(`<div class="language-yaml line-numbers-mode" data-ext="yml"><pre class="language-yaml"><code><span class="token key atrule">spring</span><span class="token punctuation">:</span>
  <span class="token key atrule">security</span><span class="token punctuation">:</span>
    <span class="token key atrule">user</span><span class="token punctuation">:</span>
      <span class="token key atrule">name</span><span class="token punctuation">:</span> cunyu1943
      <span class="token key atrule">password</span><span class="token punctuation">:</span> cunyu1943@
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>然后重启我们的项目，就可以用我们配置的用户和密码来进行登陆了。</p><h3 id="创建页面" tabindex="-1"><a class="header-anchor" href="#创建页面" aria-hidden="true">#</a> 创建页面</h3><p>新建一个 <code>Controller</code> 页面，用于打印最经典的 <code>Hello World!</code>。</p><div class="language-java line-numbers-mode" data-ext="java"><pre class="language-java"><code><span class="token annotation punctuation">@RestController</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HelloController</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/hello&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">hello</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;Hello World！&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>重新启动项目后，在浏览器中访问以下地址：</p><blockquote><p><code>http://localhost:8080/hello</code></p></blockquote><p>然后 Spring Security 就会重定向到 <code>http://localhost:8080/login</code> 页面，此时我们用上面配置的用户名和密码进行登录，登录成功后就会跳转到我们的 <code>/hello</code> 页面了，页面中会打印 <code>Hello World!</code></p><p><img src="`+g+'" alt=""></p><h2 id="总结" tabindex="-1"><a class="header-anchor" href="#总结" aria-hidden="true">#</a> 总结</h2><p>以上就是 <code>Spring Boot</code> 集成 <code>Spring Security</code> 的实例了，主要演示了最经典的 <code>Hello World</code> 程序。关于更多 <code>Spring Security</code> 的知识，我们后续的文章再见吧！</p>',11);function C(Q,v){const i=p("ExternalLinkIcon"),o=p("RouterLink");return l(),r("div",null,[k,a("p",null,[n("博客："),a("a",m,[n("JavaPark"),e(i)])]),A,a("blockquote",null,[a("p",null,[e(o,{to:"/md/java/springboot/20220102-the-methods-to-create-springboot-project.html"},{default:t(()=>[n("Spring Boot 基础教程：创建项目的 3 种方式")]),_:1})])]),S,a("blockquote",null,[a("p",null,[e(o,{to:"/md/java/springboot/20220103-configuration.html"},{default:t(()=>[n("Spring Boot 基础教程：配置详解")]),_:1})])]),b])}const K=c(h,[["render",C],["__file","20220109-integrated-security.html.vue"]]);export{K as default};
